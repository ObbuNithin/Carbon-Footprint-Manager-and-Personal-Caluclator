<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>View transportation</title>
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
        <style>
            body {
                padding-top: 70px;
                font-family: 'Roboto', sans-serif;
                background-color: #f4f4f9;
            }

            .form-container {
                margin-top: 50px;
                max-width: 600px;
                margin-left: auto;
                margin-right: auto;
                background-color: #fff;
                padding: 30px;
                border-radius: 10px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            .form-header {
                margin-bottom: 30px;
                text-align: center;
                font-size: 28px;
                font-weight: 600;
                color: #333;
            }

            .btn-submit {
                width: 100%;
                padding: 10px;
                font-size: 16px;
                font-weight: 500;
                background-color: #007bff;
                border: none;
                border-radius: 5px;
                color: #fff;
                cursor: pointer;
            }

            .btn-submit:hover {
                background-color: #0056b3;
            }

            .form-label {
                font-size: 16px;
                font-weight: 500;
                color: #333;
            }

            .form-control {
                margin-bottom: 20px;
                padding: 15px;
                font-size: 16px;
                border-radius: 5px;
                border: 1px solid #ddd;
                box-sizing: border-box;
            }

            #result {
                margin-top: 20px;
                font-size: 18px;
                font-weight: 500;
                color: #333;
                text-align: center;
            }

            #result.success {
                color: #28a745;
            }

            #result.error {
                color: #dc3545;
            }

            /* Header and Navbar Styles */
            header {
                background-color: #007bff;
                padding: 10px 0;
            }

            .logo h1 {
                font-size: 32px;
                color: #fff;
                margin-left: 20px;
            }

            .navmenu {
                display: flex;
                align-items: center;
            }

            .navmenu ul {
                display: flex;
                list-style: none;
                margin-right: 20px;
            }

            .navmenu li {
                margin-left: 15px;
            }

            .navmenu a {
                color: #fff;
                text-decoration: none;
                font-size: 16px;
            }

            .navmenu a:hover {
                color: #ffd700;
            }

            .mobile-nav-toggle {
                color: #fff;
            }
        </style>
        <meta charset="utf-8">
      <meta content="width=device-width, initial-scale=1.0" name="viewport">
      <title>Industry Carbon Footprint Management System</title>
      <meta name="description" content="">
      <meta name="keywords" content="">
    
      <!-- Favicons -->
      <link href="{{ url_for('static', filename='img/favicon.png') }}" rel="icon">
      <link href="{{ url_for('static', filename='img/apple-touch-icon.png') }}" rel="apple-touch-icon">
    
      <!-- Fonts -->
      <link href="https://fonts.googleapis.com" rel="preconnect">
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    
      <!-- Vendor CSS Files -->
      <link href="{{ url_for('static', filename='vendor/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet">
        <link href="{{ url_for('static', filename='vendor/bootstrap-icons/bootstrap-icons.css') }}" rel="stylesheet">
        <link href="{{ url_for('static', filename='vendor/aos/aos.css') }}" rel="stylesheet">
        <link href="{{ url_for('static', filename='vendor/swiper/swiper-bundle.min.css') }}" rel="stylesheet">
        <link href="{{ url_for('static', filename='vendor/glightbox/css/glightbox.min.css') }}" rel="stylesheet">
        <link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet">
    
      <!-- Main CSS File -->
      <link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet">
    </head>
    <body>
        <header id="header" class="header d-flex align-items-center fixed-top">
            <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">
                <a href="index.html" class="logo d-flex align-items-center me-auto me-lg-0">
                    <h1 class="sitename">GM</h1>
                    <span>.</span>
                </a>
                <nav id="navmenu" class="navmenu">
                    <ul>
                        <li><a href="{{ url_for('index') }}" class="active">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#team">Team</a></li>
                        <li class="dropdown">
                            <a href="#"><span>Signup</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                            <ul>
                                <li><a href="admin_login">Admin</a></li>
                                <li><a href="{{ url_for('signup') }}">Industry Manager</a></li>
                                <li><a href="auditor_signup">Auditor</a></li>
                                <li><a href="#">Publice User</a></li>
                            </ul>
                        </li>
                    </ul>
                    <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
                </nav>
                <a class="btn-getstarted" href="login">Login</a>
            </div>
        </header>

        <div class="form-container">
            <h1 class="form-header">Enter Industry ID to Get Carbon Offset</h1>

            <!-- Form to take industry ID as input -->
            <form id="industryForm" method="POST">
                <div class="form-group">
                    <label for="industry_id" class="form-label">Industry ID:</label>
                    <input type="number" class="form-control" id="industry_id" name="industry_id" required>
                </div>
                <button type="submit" class="btn-submit">Calculate Carbon Offset</button>
            </form>

            <p id="result"></p>
        </div>

        <script>
            // Handle form submission
            document.getElementById('industryForm').addEventListener('submit', function(event) {
                event.preventDefault();

                const industryId = document.getElementById('industry_id').value;

                if (!industryId) {
                    alert("Please enter an industry ID.");
                    return;
                }

                // Send the form data to the server via POST request
                fetch('/get_carbon_offset', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ industry_id: industryId })
                })
                .then(response => response.json())
                .then(data => {
                    // Display the result
                    if (data.total_offset !== undefined) {
                        document.getElementById('result').innerText = `Total Carbon Offset: ${data.total_offset}`;
                        document.getElementById('result').classList.add('success');
                        document.getElementById('result').classList.remove('error');
                    } else {
                        document.getElementById('result').innerText = `Error: ${data.error}`;
                        document.getElementById('result').classList.add('error');
                        document.getElementById('result').classList.remove('success');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('result').innerText = 'An error occurred while fetching data.';
                    document.getElementById('result').classList.add('error');
                    document.getElementById('result').classList.remove('success');
                });
            });
        </script>
    </body>
</html>